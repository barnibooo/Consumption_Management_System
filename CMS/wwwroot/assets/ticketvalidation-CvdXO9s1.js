import{d as I,r as a,j as e,e as d,C as T,I as S,T as i,h as B,p as M,f as E}from"./AuthService-D1aEyyWh.js";import{A as F,p,r as W,N as D}from"./RefreshService-BkjTwjQ-.js";import{S as N,f as R}from"./format-_UqaYdSZ.js";import{T as f}from"./ThemeProvider-DseDVMsF.js";import{A as u,S as X}from"./Snackbar-D43d_GBE.js";import{T as H}from"./TextField-B7QlOAzT.js";import{C as V}from"./Card-CQ9FsSn_.js";import{a as $,C as L}from"./CardHeader-DGYPRWYL.js";import{C as U}from"./CardMedia-D7Asrf_x.js";import{C as J}from"./CardContent-CoE-aqRQ.js";import"./Select-Bkp5DD7O.js";const g=I({palette:{mode:"dark"}}),j=document.createElement("style");j.textContent=`
  body {
    background-color: #0f1827;
    color: #d5d6d6;
    margin: 0;
    padding: 0;
  }
`;document.head.appendChild(j);const K=t=>{const l=new Date(t);return R(l,"yyyy-MM-dd HH:mm")};function O(){const[t,l]=a.useState(null),[k,c]=a.useState(!1),[r,n]=a.useState(null),[x,w]=a.useState(""),[y,b]=a.useState(!1),[v,C]=a.useState(!1),[h,z]=a.useState(!1);if(a.useEffect(()=>(document.body.style.overflowX="hidden",()=>{document.body.style.overflowX="auto"}),[]),a.useEffect(()=>{(async()=>{const s=localStorage.getItem("token");if(!s){window.location.href="/login";return}const m=p(s);if(!m||m.role!=="Admin"&&m.role!=="TicketAssistant"&&m.role!=="RestaurantAssistant"){z(!0);return}if(!y){if(!await B()){window.location.href="/login";return}v||(await W(),C(!0)),b(!0)}})()},[]),h)return localStorage.setItem("isUnauthorizedRedirect","true"),setTimeout(()=>{window.location.href="/"},0);const A=()=>{c(!0);const o=localStorage.getItem("token");M.get(`https://localhost:5000/api/Customers/${x}`,{headers:{Authorization:`Bearer ${o}`}}).then(s=>{l(s.data),c(!1)}).catch(s=>{s.response&&s.response.status===404?n("A megadott kártyaazonosító nem található!"):s.response&&s.response.status===401?n("Az oldal használatához magasabb jogosultság szükséges!"):n(s.message),c(!1)})};return h?e.jsx(d,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:e.jsx(f,{theme:g,children:e.jsx(u,{severity:"warning",children:"Az oldal használatához magasabb jogosultság szükséges vagy a kapcsolat megszakadt!"})})}):k?e.jsx(d,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:e.jsx(T,{size:120,sx:{color:"#bfa181"}})}):e.jsxs(d,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh",padding:{xs:0,sm:2},paddingTop:{xs:2,sm:2},paddingBottom:{xs:2,sm:2},alignItems:"center",width:"100%",maxWidth:"100%",backgroundColor:"#0F1827",overflowX:"hidden"},children:[e.jsxs(d,{sx:{width:"100%",maxWidth:"100%",display:"flex",flexDirection:{xs:"row",sm:"row"},justifyContent:"center",alignItems:"center",gap:{xs:1,sm:2},p:{xs:0,sm:0},overflowX:"hidden"},children:[e.jsx(H,{sx:{width:{xs:"90%",sm:"50%",md:"30%"},height:"Auto",marginTop:0,"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#d5d6d6"},"&:hover fieldset":{borderColor:"#d5d6d6"},"&.Mui-focused fieldset":{borderColor:"#BFA181"}},"& .MuiInputLabel-root":{color:"#d5d6d6",fontSize:{xs:"0.9rem",sm:"1rem"}},"& .MuiInputLabel-root.Mui-focused":{color:"#BFA181"},"& .MuiInputBase-input":{color:"#d5d6d6",caretColor:"#d5d6d6",padding:{xs:"12px",sm:"14px"}},marginBottom:{xs:0,sm:0}},required:!0,id:"outlined-search",label:"Kártyaazonosító",type:"text",margin:"dense",value:x,onChange:o=>{w(o.target.value),l(null)}}),e.jsx(S,{sx:{fontSize:{xs:32,sm:40},color:"#d5d6d6","&.Mui-disabled":{color:"#6d737d !important"},"&:not(.Mui-disabled):hover":{color:"#BFA181"},"&:not(.Mui-disabled):active":{color:"#d5d6d6"}},onClick:A,disabled:!x,children:e.jsx(N,{fontSize:"inherit"})})]}),r&&e.jsx(d,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:e.jsx(X,{open:!!r,autoHideDuration:6e3,onClose:()=>{r==="A megadott kártyaazonosító nem található!"?(n(null),window.location.reload()):r==="Network Error"&&(n(null),window.location.href="/")},children:e.jsx(u,{onClose:()=>{r==="A megadott kártyaazonosító nem található!"?(n(null),window.location.reload()):r==="Network Error"&&(n(null),window.location.href="/")},severity:"error",variant:"filled",sx:{width:"100%"},children:r==="A megadott kártyaazonosító nem található!"?"A megadott kártyaazonosító nem található!":"Hiba történt az adatok betöltése közben!"})})}),t&&e.jsx(f,{theme:g,children:e.jsxs(V,{sx:{bgcolor:"#202938",color:"#d5d6d6",width:{xs:"95%",sm:"70%",md:"60%",lg:"50%",xl:"40%"},marginTop:{xs:1,sm:2},borderRadius:{xs:0,sm:1},overflowX:"hidden"},children:[e.jsx($,{avatar:e.jsx(F,{sx:{bgcolor:"#BFA181",color:"#d5d6d6",width:{xs:40,sm:48},height:{xs:40,sm:48}}}),title:e.jsxs(i,{sx:{fontSize:{xs:"1.2rem",sm:"1.5rem"},fontWeight:500,color:"#d5d6d6"},children:[t==null?void 0:t.name," #",t==null?void 0:t.customerId]}),subheader:e.jsx(i,{variant:"subtitle1",sx:{color:"#d5d6d6",fontSize:{xs:"0.9rem",sm:"1rem"}},children:"Adatok"})}),e.jsx(U,{component:"img",sx:{height:{xs:150,sm:194},objectFit:"cover"},image:"/img/profile/profile_temp.png"}),e.jsxs(J,{sx:{padding:{xs:1,sm:2},overflowX:"hidden"},children:[e.jsx(i,{variant:"h4",sx:{color:"text.secondary",marginY:{xs:1,sm:2},textIndent:{xs:10,sm:20},fontWeight:400,fontSize:{xs:"1.5rem",sm:"2rem"}},children:t?`${t==null?void 0:t.name}`:""}),e.jsx(i,{variant:"h6",sx:{color:"text.secondary",marginTop:"10px",marginBottom:"10px",textIndent:"20px",fontWeight:300,textAlign:"left"},children:t?`Belépés ideje: ${K(t.createdAt)}`:""}),e.jsx(i,{variant:"h6",sx:{color:"text.secondary",marginTop:"10px",marginBottom:"10px",textIndent:"20px",fontWeight:300,textAlign:"left"},children:t?t.tickets.map(o=>e.jsxs("div",{children:["Jegy: ",o.ticketName]},o.ticketId)):"N/A"}),e.jsxs(i,{sx:{color:"text.secondary",marginY:{xs:1,sm:2},textIndent:{xs:10,sm:20},fontWeight:400,fontSize:{xs:"1.2rem",sm:"1.5rem"},overflowWrap:"break-word",wordWrap:"break-word"},children:["Kiegészítő jegy(ek):",t?t.admissions.map(o=>e.jsx("li",{children:o.admissionName},o.admissionId)):"N/A"]})]}),e.jsx(L,{})]})})]})}const P=p(localStorage.getItem("token")).role;E.createRoot(document.getElementById("root")).render(e.jsxs(d,{sx:{overflowX:"hidden",width:"100%"},children:[e.jsx(D,{role:P}),e.jsx(O,{})]}));
