import{n as D,j as e,o as q,r,e as H,T as K,h as V,p as S,f as L}from"./AuthService-D1aEyyWh.js";import{M as U,r as J,p as O,N as $}from"./RefreshService-BkjTwjQ-.js";import{u as Q}from"./index-qzWsEH3_.js";import{C as W}from"./Card-CQ9FsSn_.js";import{C as X}from"./CardMedia-D7Asrf_x.js";import{C as _}from"./CardContent-CoE-aqRQ.js";import{T as p}from"./TextField-B7QlOAzT.js";import{F as G,I as Y,S as Z}from"./Select-Bkp5DD7O.js";import{B as ee}from"./Button-CRJhtSgO.js";import{S as z,A as y}from"./Snackbar-D43d_GBE.js";const te=D(e.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd"),B=document.createElement("style");B.textContent=`
  body {
    background-color: #0f1827;
    color: #d5d6d6;
    margin: 0;
    padding: 0;
  }
`;document.head.appendChild(B);function re(){const I=q(),N=Q(I.breakpoints.down("sm")),[M,c]=r.useState(!1),[T,F]=r.useState([]),[u,g]=r.useState(""),[o,v]=r.useState(""),[a,b]=r.useState(""),[n,C]=r.useState(""),[l,w]=r.useState(""),[A,x]=r.useState(!1),[j,m]=r.useState(null),[s,f]=r.useState({username:!1,firstName:!1,lastName:!1,password:!1,role:!1});if(r.useEffect(()=>{(async()=>{const h=localStorage.getItem("token");if(!h){c(!0);return}try{if(!await V()){c(!0);return}await J();const P=await S.get("https://localhost:5000/api/Employees/roles",{headers:{Authorization:`Bearer ${h}`}});F(P.data),c(!1)}catch{c(!0)}})()},[]),M)return localStorage.setItem("isUnauthorizedRedirect","true"),window.location.href="/",null;const R=async()=>{if(f({username:!0,firstName:!0,lastName:!0,password:!0,role:!0}),!!k())try{const t={username:o,firstName:a,lastName:n,password:l,role:u};await S.post("https://localhost:5000/api/Auth/register",[t],{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),x(!0),m(null),v(""),b(""),C(""),w(""),g(""),f({username:!1,firstName:!1,lastName:!1,password:!1,role:!1})}catch(t){t.response?m("Hiba történt a regisztráció során!"):m("Nem sikerült kapcsolódni a szerverhez!"),x(!1)}},k=()=>o.trim()!==""&&a.trim()!==""&&n.trim()!==""&&l.trim()!==""&&u.trim()!=="",i=t=>{f(h=>({...h,[t]:!0}))},d={width:{xs:"90%",sm:"80%",md:"70%"},mb:2,"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#d5d6d6"},"&:hover fieldset":{borderColor:"#d5d6d6"},"&.Mui-focused fieldset":{borderColor:"#BFA181"}},"& .MuiInputLabel-root":{color:"#d5d6d6",fontSize:{xs:"0.9rem",sm:"1rem"}},"& .MuiInputLabel-root.Mui-focused":{color:"#BFA181"},"& .MuiInputBase-input":{color:"#d5d6d6",caretColor:"#d5d6d6",padding:{xs:"12px",sm:"14px"}}};return e.jsx(H,{sx:{backgroundColor:"#0F1827",display:"flex",justifyContent:"center",alignItems:"flex-start",width:"100%",minHeight:"100vh",padding:{xs:1,sm:2,md:4},paddingTop:{xs:3,sm:4},boxSizing:"border-box",overflowX:"hidden"},children:e.jsxs(W,{sx:{color:"#d5d6d6",backgroundColor:"#202938",width:{xs:"95%",sm:"85%",md:"70%",lg:"60%"},height:"auto",display:"flex",flexDirection:"column"},children:[!N&&e.jsx(X,{component:"img",sx:{width:"100%",height:200,objectFit:"cover",objectPosition:"center"},image:"/img/main/login_sample.png",alt:"Registration sample"}),e.jsxs(_,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",p:{xs:0,sm:3},paddingBottom:{xs:2,sm:3},paddingTop:{xs:2,sm:3}},children:[e.jsx(K,{variant:"h4",sx:{color:"#d5d6d6",fontSize:{xs:"1.2rem",sm:"2rem"},textAlign:"center",mb:3,fontWeight:300},children:"Új munkavállaló regisztrációja"}),e.jsx(p,{sx:d,required:!0,label:"Felhasználónév",value:o,onChange:t=>v(t.target.value),onBlur:()=>i("username"),error:s.username&&o.trim()==="",helperText:s.username&&o.trim()===""?"Kötelező mező":""}),e.jsx(p,{sx:d,required:!0,label:"Keresztnév",value:a,onChange:t=>b(t.target.value),onBlur:()=>i("firstName"),error:s.firstName&&a.trim()==="",helperText:s.firstName&&a.trim()===""?"Kötelező mező":""}),e.jsx(p,{sx:d,required:!0,label:"Vezetéknév",value:n,onChange:t=>C(t.target.value),onBlur:()=>i("lastName"),error:s.lastName&&n.trim()==="",helperText:s.lastName&&n.trim()===""?"Kötelező mező":""}),e.jsx(p,{sx:d,required:!0,label:"Jelszó",type:"password",autoComplete:"new-password",value:l,onChange:t=>w(t.target.value),onBlur:()=>i("password"),error:s.password&&l.trim()==="",helperText:s.password&&l.trim()===""?"Kötelező mező":""}),e.jsxs(G,{sx:{...d,mt:1},error:s.role&&u==="",children:[e.jsx(Y,{required:!0,children:"Munkakör"}),e.jsx(Z,{value:u,label:"Munkakör",onChange:t=>g(t.target.value),onBlur:()=>i("role"),sx:{"& .MuiSelect-icon":{color:"#d5d6d6"}},MenuProps:{PaperProps:{sx:{backgroundColor:"#202938","& .MuiMenuItem-root":{color:"#d5d6d6","&:hover":{backgroundColor:"#37404f"}}}}},children:T.map(t=>e.jsx(U,{value:t,children:t},t))})]}),e.jsx(ee,{sx:{width:{xs:"90%",sm:"80%",md:"70%"},backgroundColor:"#BFA181",py:{xs:1.5,sm:2},mt:2,mb:2,"&.Mui-disabled":{backgroundColor:"#9e9386",color:"#d5d6d6"},"&:hover":{backgroundColor:"#8B7355"}},variant:"contained",endIcon:e.jsx(te,{}),onClick:R,disabled:!k(),children:"Regisztráció"}),e.jsx(z,{open:A,autoHideDuration:3e3,onClose:()=>{x(!1),window.location.reload()},children:e.jsx(y,{severity:"success",variant:"filled",sx:{width:"100%"},children:"Sikeres regisztráció!"})}),e.jsx(z,{open:!!j,onClose:()=>{m(null),window.location.href="/"},children:e.jsx(y,{severity:"error",variant:"filled",sx:{width:"100%"},children:j})})]})]})})}const se=O(localStorage.getItem("token")).role;L.createRoot(document.getElementById("root")).render(e.jsxs(e.Fragment,{children:[e.jsx($,{role:se}),e.jsx(re,{})]}));
