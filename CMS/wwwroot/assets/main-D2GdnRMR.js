import{g as b,a as w,r as n,u as v,j as t,s as y,c as x,b as R,B as S,m as A,d as T,e as i,T as z,f as V,h as H}from"./AuthService-D1aEyyWh.js";import{p as j,N as I,r as E}from"./RefreshService-BkjTwjQ-.js";import{T as N}from"./ThemeProvider-DseDVMsF.js";import{C as l}from"./Card-CQ9FsSn_.js";import{C as U}from"./CardMedia-D7Asrf_x.js";import{S as F,A as B}from"./Snackbar-D43d_GBE.js";function L(e){return w("MuiCardActionArea",e)}const f=b("MuiCardActionArea",["root","focusVisible","focusHighlight"]),M=e=>{const{classes:s}=e;return R({root:["root"],focusHighlight:["focusHighlight"]},L,s)},_=y(S,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(e,s)=>s.root})(A(({theme:e})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${f.focusHighlight}`]:{opacity:(e.vars||e).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${f.focusVisible} .${f.focusHighlight}`]:{opacity:(e.vars||e).palette.action.focusOpacity}}))),$=y("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(e,s)=>s.focusHighlight})(A(({theme:e})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})}))),J=n.forwardRef(function(s,o){const r=v({props:s,name:"MuiCardActionArea"}),{children:h,className:a,focusVisibleClassName:u,...g}=r,p=r,m=M(p);return t.jsxs(_,{className:x(m.root,a),focusVisibleClassName:x(u,m.focusVisible),ref:o,ownerState:p,...g,children:[h,t.jsx($,{className:m.focusHighlight,ownerState:p})]})}),D=T({palette:{mode:"dark"},typography:{fontFamily:"Roboto, sans-serif"}}),k=document.createElement("style");k.textContent=`
  body {
    background-color: #0f1827;
    color: #d5d6d6;
    margin: 0;
    padding: 0;
  }
`;document.head.appendChild(k);const c=(e,s,o)=>t.jsx(J,{onClick:()=>window.location.href=o,children:t.jsxs(i,{sx:{position:"relative"},children:[t.jsx(U,{component:"img",height:"300",image:e,alt:s,sx:{width:"100%",height:{xs:"200px",sm:"250px",md:"300px"},objectFit:"cover"}}),t.jsx(z,{variant:"h2",component:"div",fontFamily:"Roboto, sans-serif",sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",color:"white",backgroundColor:"rgba(0, 0, 0, 0.5)",opacity:0,transition:"opacity 0.3s","&:hover":{opacity:1}},children:s})]})}),d={width:{xs:"100%",sm:"80%",md:"65%",lg:"45%",xl:"35%"}};function O(){const[e,s]=n.useState(null),[o,r]=n.useState(!0);return n.useEffect(()=>{(async()=>{const a=localStorage.getItem("token");if(a){const u=j(a);s(u.role),r(!1)}})()},[]),o?null:t.jsx(t.Fragment,{children:t.jsx(N,{theme:D,children:t.jsx(i,{sx:{width:"100%",backgroundColor:"#0f1827",display:"flex",justifyContent:"center",overflowX:"hidden"},children:t.jsxs(i,{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"flex-start",gap:2,sx:{width:"100%",maxWidth:"100vw",py:4},children:[e==="Admin"||e==="TicketAssistant"?t.jsx(i,{sx:d,children:t.jsx(l,{sx:{height:"100%"},children:c("/img/landing/ticket_temp.png","Jegyértékesítés","ticket")})}):null,e==="Admin"||e==="TicketAssistant"||e==="RestaurantAssistant"?t.jsx(i,{sx:d,children:t.jsx(l,{sx:{height:"100%"},children:c("/img/landing/ticketcheck_temp.png","Jegyellenőrzés","ticketValidation")})}):null,e==="Admin"?t.jsx(i,{sx:d,children:t.jsx(l,{sx:{height:"100%"},children:c("/img/landing/registration_temp.png","Regisztráció","registration")})}):null,e==="Admin"?t.jsx(i,{sx:d,children:t.jsx(l,{sx:{height:"100%"},children:c("/img/landing/daily_temp.png","Napi ajánlat kezelő","dailyspecials")})}):null,e==="Admin"||e==="RestaurantAssistant"?t.jsx(i,{sx:d,children:t.jsx(l,{sx:{height:"100%"},children:c("/img/landing/restaurant_temp.png","Étterem","order")})}):null,e==="Admin"||e==="TicketAssistant"?t.jsx(i,{sx:d,children:t.jsx(l,{sx:{height:"100%"},children:c("/img/landing/checkout_temp.png","Véglegesítés","checkout")})}):null]})})})})}const P=()=>{const[e,s]=n.useState(null),[o,r]=n.useState(!0),[h,a]=n.useState(!1);return n.useEffect(()=>{(async()=>{try{const g=localStorage.getItem("token");if(!g){window.location.href="/login";return}if(!await H()){window.location.href="/login";return}if(!await E()){window.location.href="/login";return}const C=j(g);s(C.role),localStorage.getItem("isUnauthorizedRedirect")==="true"&&(localStorage.removeItem("isUnauthorizedRedirect"),a(!0))}catch{window.location.href="/login"}finally{r(!1)}})()},[]),o?null:t.jsxs(t.Fragment,{children:[t.jsx(I,{role:e||"Guest"}),t.jsx(O,{}),h&&t.jsx(F,{open:h,autoHideDuration:3e3,onClose:()=>a(!1),children:t.jsx(B,{severity:"warning",variant:"filled",sx:{width:"100%"},children:"Az oldal használatához magasabb jogosultság szükséges vagy a kapcsolat megszakadt!"})})]})};V.createRoot(document.getElementById("root")).render(t.jsx(P,{}));
