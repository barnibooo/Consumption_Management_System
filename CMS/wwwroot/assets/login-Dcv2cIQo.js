import{l as f,j as e,o as v,r as n,e as j,T as i,C as b,n as C,f as y}from"./index-DW2RJM_L.js";import{c as B}from"./AuthService-CMdpMXi0.js";import{u as k}from"./index-BT0NnjLt.js";import{C as w}from"./Card-B3esABxY.js";import{C as I}from"./CardMedia-Datqsumh.js";import{C as M}from"./CardContent-BSubk8B7.js";import{T as m}from"./TextField-B_SISyHb.js";import{B as S}from"./Button-L5L-jXUd.js";import"./Select-CssrkscS.js";const z=f(e.jsx("path",{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8z"}),"Login");function T(){const u=v(),s=k(u.breakpoints.down("lg")),[a,h]=n.useState(""),[d,g]=n.useState(""),[c,r]=n.useState(""),[p,l]=n.useState(!1);n.useEffect(()=>{(async()=>{await B()&&(window.location.href="/")})()},[]);const x=o=>{if(o.preventDefault(),!a||!d){r("Minden mezőt ki kell tölteni!");return}l(!0),C.post("https://localhost:5000/api/Auth/login",{userName:a,password:d}).then(t=>{console.log(t),t.data.token&&t.data.refreshToken?(localStorage.setItem("token",t.data.token),localStorage.setItem("refreshToken",t.data.refreshToken),r(""),setTimeout(()=>{window.location.href="/"},0)):(r("Hiba történt: Érvénytelen válasz a szervertől."),l(!1))}).catch(t=>{t.response&&t.response.status===401?r("Hibás felhasználónév vagy jelszó."):r("Hiba történt: Sikertelen bejelentkezés."),l(!1)})};return e.jsx(j,{sx:{backgroundColor:"#0F1827",display:"flex",justifyContent:"center",alignItems:"center",width:"100vw",minHeight:"100vh"},children:e.jsxs(w,{sx:{color:"#d5d6d6",backgroundColor:"#202938",width:{xs:"90%",sm:"70%",md:"55%",lg:"60%"},height:"auto",display:"flex",flexDirection:s?"column":"row"},children:[!s&&e.jsx(I,{component:"img",sx:{width:"40%",height:"auto",objectFit:"cover",objectPosition:"right"},image:"/img/main/login_sample.png",alt:"Login sample"}),e.jsxs(M,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:s?"100%":"60%",flex:1},children:[e.jsx(i,{gutterBottom:!0,variant:"h5",component:"div",sx:{mr:2,display:{md:"flex"},fontWeight:400,color:"#d5d6d6",textDecoration:"none",marginBottom:2},children:"Consumption Management System"}),e.jsx(i,{gutterBottom:!0,variant:"h2",component:"div",sx:{mr:2,display:{md:"flex"},fontWeight:300,color:"#d5d6d6",textDecoration:"none",marginBottom:2},children:"Üdvözöljük!"}),e.jsx(i,{gutterBottom:!0,variant:"h5",component:"div",sx:{mr:2,display:{md:"flex"},fontWeight:300,color:"#d5d6d6",textDecoration:"none",marginBottom:2},children:"Kérjük jelentkezz be!"}),e.jsxs("form",{onSubmit:x,style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(m,{sx:{width:"70%",height:"Auto","& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#d5d6d6"},"&:hover fieldset":{borderColor:"#d5d6d6"},"&.Mui-focused fieldset":{borderColor:"#BFA181"}},"& .MuiInputLabel-root":{color:"#d5d6d6"},"& .MuiInputLabel-root.Mui-focused":{color:"#BFA181"},"& .MuiInputBase-input":{color:"#d5d6d6",caretColor:"#d5d6d6"},marginBottom:2},required:!0,id:"outlined-search",label:"Felhasználónév",type:"search",margin:"dense",value:a,onChange:o=>h(o.target.value)}),e.jsx(m,{sx:{width:"70%",height:"Auto","& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#d5d6d6"},"&:hover fieldset":{borderColor:"#d5d6d6"},"&.Mui-focused fieldset":{borderColor:"#BFA181"}},"& .MuiInputLabel-root":{color:"#d5d6d6"},"& .MuiInputLabel-root.Mui-focused":{color:"#BFA181"},"& .MuiInputBase-input":{color:"#d5d6d6",caretColor:"#d5d6d6"},marginBottom:2},required:!0,id:"outlined-password-input",label:"Jelszó",type:"password",autoComplete:"current-password",margin:"dense",value:d,onChange:o=>g(o.target.value)}),c&&e.jsx(i,{variant:"body2",color:"error",sx:{marginBottom:2},children:c}),p?e.jsxs(e.Fragment,{children:[e.jsx(i,{variant:"body2",color:"success",sx:{marginBottom:2},children:"Sikeres belépés, átirányítás..."}),e.jsx(b,{sx:{marginBottom:2}})]}):e.jsx(S,{sx:{width:"70%",height:"Auto",backgroundColor:"#BFA181",marginBottom:2},variant:"contained",endIcon:e.jsx(z,{}),type:"submit",children:"Belépés"})]})]})]})})}y.createRoot(document.getElementById("root")).render(e.jsx(e.Fragment,{children:e.jsx(T,{})}));
