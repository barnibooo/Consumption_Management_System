import{d as Y,r as a,j as e,e as s,C as Z,T as d,n as p,f as _}from"./index-DW2RJM_L.js";import{M as u,p as k,N as ee}from"./Navbar-BavKYrQN.js";import{S as oe}from"./Send-COCKoMwb.js";import{c as te}from"./AuthService-4k0KJGyh.js";import{r as re}from"./RefreshService-CkshRjuf.js";import{S as M,A as v}from"./Snackbar-BoVZBEip.js";import{T as le}from"./ThemeProvider-BqDNcuYG.js";import{F as h,I as f,S as m}from"./Select-CssrkscS.js";import{B as ne}from"./Button-L5L-jXUd.js";const ae=Y({palette:{mode:"dark",primary:{main:"#90caf9"},secondary:{main:"#f48fb1"},background:{default:"#121212",paper:"#1e1e1e"},text:{primary:"#ffffff",secondary:"#b0bec5"}}});function se(){const[O,z]=a.useState([]),[S,w]=a.useState([]),[y,P]=a.useState([]),[B,A]=a.useState([]),[E,W]=a.useState([]),[T,D]=a.useState([]),[R,F]=a.useState([]),[N,H]=a.useState([]),[L,g]=a.useState(!1),[x,i]=a.useState(null),[l,C]=a.useState(["","","","","","","",""]),[K,j]=a.useState(!0),[U,b]=a.useState(!1);if(a.useEffect(()=>{(async()=>{const r=localStorage.getItem("token");if(!r){console.error("No token found. Redirecting to login..."),g(!0);return}try{const n=k(r);if(!n||n.role!=="Admin"){console.error("Unauthorized access: Admin role required"),g(!0);return}if(!await te()){console.error("Invalid token. Redirecting to login..."),g(!0);return}await re()}catch(n){console.error("Error during token validation or data fetching:",n),g(!0),j(!1)}})()},[]),L)return localStorage.setItem("isUnauthorizedRedirect","true"),window.location.href="/",null;a.useEffect(()=>{(async()=>{const r=localStorage.getItem("token");if(!r){console.error("No token found. Redirecting to login..."),window.location.href="/login";return}try{const n=await p.get("https://localhost:5000/api/MenuItems",{headers:{Authorization:`Bearer ${r}`}}),I=n.data.filter(t=>t.category==="Leves");z(I.map(t=>t.name));const $=n.data.filter(t=>t.category==="Előétel");w($.map(t=>t.name));const q=n.data.filter(t=>t.category==="Főétel");P(q.map(t=>t.name));const V=n.data.filter(t=>t.category==="Hamburger");A(V.map(t=>t.name));const J=n.data.filter(t=>t.category==="Pizza");W(J.map(t=>t.name));const G=n.data.filter(t=>t.category==="Desszert");D(G.map(t=>t.name));const Q=n.data.filter(t=>t.category==="Ital");F(Q.map(t=>t.name));const X=n.data.filter(t=>t.category==="Kávé");H(X.map(t=>t.name))}catch(n){console.error("Error during data fetching:",n),i("Hiba történt az adatok betöltése közben!")}finally{j(!1)}})()},[]);const c=o=>r=>{const n=[...l];n[o]=r.target.value,C(n)};return K?e.jsx(s,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:e.jsx(Z,{size:120,sx:{color:"#bfa181"}})}):x?e.jsx(s,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:e.jsx(M,{open:!!x,autoHideDuration:6e3,onClose:()=>{i(null),window.location.href="/"},children:e.jsx(v,{onClose:()=>{i(null),window.location.href="/"},severity:"error",variant:"filled",sx:{width:"100%"},children:"Hiba történt az adatok betöltése közben!"})})}):e.jsxs(e.Fragment,{children:[e.jsx(le,{theme:ae,children:e.jsxs(s,{sx:{padding:4},children:[e.jsx(d,{variant:"h4",textAlign:"center",sx:{marginBottom:4,fontWeight:400},children:"Napi Ajánlat Kezelő"}),e.jsxs(s,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:[e.jsxs(s,{sx:{width:{xs:"100%",sm:"40%"},marginBottom:2,marginRight:{xs:0,sm:2}},children:[e.jsx(d,{variant:"h6",textAlign:"left",fontWeight:350,marginBottom:2,children:"Leves"}),e.jsxs(h,{fullWidth:!0,children:[e.jsx(f,{id:"food-select-label-0",sx:{color:"#d5d6d6","&.Mui-focused":{color:"#bfa181"}},children:"Leves választása"}),e.jsx(m,{labelId:"food-select-label-0",id:"food-select-0",value:l[0]||"",label:"Leves választása",onChange:c(0),MenuProps:{PaperProps:{sx:{backgroundColor:"#0f1827","& .MuiMenuItem-root":{color:"#d5d6d6","&.Mui-selected":{backgroundColor:"#1a2738"},"&.Mui-selected:hover":{backgroundColor:"#1a2738"}}}}},sx:{color:"#d5d6d6",backgroundColor:"#0f1827","&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#bfa181"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"#d5d6d6"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#bfa181"},"& .MuiSelect-icon":{color:"#d5d6d6"}},children:O.map((o,r)=>e.jsx(u,{value:o,children:o},r))})]})]}),e.jsxs(s,{sx:{width:{xs:"100%",sm:"40%"},marginBottom:2,marginRight:{xs:0,sm:2}},children:[e.jsx(d,{variant:"h6",textAlign:"left",fontWeight:350,marginBottom:2,children:"Előétel"}),e.jsxs(h,{fullWidth:!0,children:[e.jsx(f,{id:"food-select-label-1",sx:{color:"#d5d6d6","&.Mui-focused":{color:"#bfa181"}},children:"Előétel választása"}),e.jsx(m,{labelId:"food-select-label-1",id:"food-select-1",value:l[1]||"",label:"Előétel választása",onChange:c(1),MenuProps:{PaperProps:{sx:{backgroundColor:"#0f1827","& .MuiMenuItem-root":{color:"#d5d6d6","&.Mui-selected":{backgroundColor:"#1a2738"},"&.Mui-selected:hover":{backgroundColor:"#1a2738"}}}}},sx:{color:"#d5d6d6",backgroundColor:"#0f1827","&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#bfa181"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"#d5d6d6"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#bfa181"},"& .MuiSelect-icon":{color:"#d5d6d6"}},children:S.map((o,r)=>e.jsx(u,{value:o,children:o},r))})]})]}),e.jsxs(s,{sx:{width:{xs:"100%",sm:"40%"},marginBottom:2,marginRight:{xs:0,sm:2}},children:[e.jsx(d,{variant:"h6",textAlign:"left",fontWeight:350,marginBottom:2,children:"Főétel"}),e.jsxs(h,{fullWidth:!0,children:[e.jsx(f,{id:"food-select-label-2",sx:{color:"#d5d6d6","&.Mui-focused":{color:"#bfa181"}},children:"Főétel választása"}),e.jsx(m,{labelId:"food-select-label-2",id:"food-select-2",value:l[2]||"",label:"Főétel választása",onChange:c(2),MenuProps:{PaperProps:{sx:{backgroundColor:"#0f1827","& .MuiMenuItem-root":{color:"#d5d6d6","&.Mui-selected":{backgroundColor:"#1a2738"},"&.Mui-selected:hover":{backgroundColor:"#1a2738"}}}}},sx:{color:"#d5d6d6",backgroundColor:"#0f1827","&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#bfa181"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"#d5d6d6"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#bfa181"},"& .MuiSelect-icon":{color:"#d5d6d6"}},children:y.map((o,r)=>e.jsx(u,{value:o,children:o},r))})]})]}),e.jsxs(s,{sx:{width:{xs:"100%",sm:"40%"},marginBottom:2,marginRight:{xs:0,sm:2}},children:[e.jsx(d,{variant:"h6",textAlign:"left",fontWeight:350,marginBottom:2,children:"Hamburger"}),e.jsxs(h,{fullWidth:!0,children:[e.jsx(f,{id:"food-select-label-3",sx:{color:"#d5d6d6","&.Mui-focused":{color:"#bfa181"}},children:"Hamburger választása"}),e.jsx(m,{labelId:"food-select-label-3",id:"food-select-3",value:l[3]||"",label:"Hamburger választása",onChange:c(3),MenuProps:{PaperProps:{sx:{backgroundColor:"#0f1827","& .MuiMenuItem-root":{color:"#d5d6d6","&.Mui-selected":{backgroundColor:"#1a2738"},"&.Mui-selected:hover":{backgroundColor:"#1a2738"}}}}},sx:{color:"#d5d6d6",backgroundColor:"#0f1827","&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#bfa181"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"#d5d6d6"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#bfa181"},"& .MuiSelect-icon":{color:"#d5d6d6"}},children:B.map((o,r)=>e.jsx(u,{value:o,children:o},r))})]})]}),e.jsxs(s,{sx:{width:{xs:"100%",sm:"40%"},marginBottom:2,marginRight:{xs:0,sm:2}},children:[e.jsx(d,{variant:"h6",textAlign:"left",fontWeight:350,marginBottom:2,children:"Pizza"}),e.jsxs(h,{fullWidth:!0,children:[e.jsx(f,{id:"food-select-label-4",sx:{color:"#d5d6d6","&.Mui-focused":{color:"#bfa181"}},children:"Pizza választása"}),e.jsx(m,{labelId:"food-select-label-4",id:"food-select-4",value:l[4]||"",label:"Pizza választása",onChange:c(4),MenuProps:{PaperProps:{sx:{backgroundColor:"#0f1827","& .MuiMenuItem-root":{color:"#d5d6d6","&.Mui-selected":{backgroundColor:"#1a2738"},"&.Mui-selected:hover":{backgroundColor:"#1a2738"}}}}},sx:{color:"#d5d6d6",backgroundColor:"#0f1827","&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#bfa181"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"#d5d6d6"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#bfa181"},"& .MuiSelect-icon":{color:"#d5d6d6"}},children:E.map((o,r)=>e.jsx(u,{value:o,children:o},r))})]})]}),e.jsxs(s,{sx:{width:{xs:"100%",sm:"40%"},marginBottom:2,marginRight:{xs:0,sm:2}},children:[e.jsx(d,{variant:"h6",textAlign:"left",fontWeight:350,marginBottom:2,children:"Desszert"}),e.jsxs(h,{fullWidth:!0,children:[e.jsx(f,{id:"food-select-label-5",sx:{color:"#d5d6d6","&.Mui-focused":{color:"#bfa181"}},children:"Desszert választása"}),e.jsx(m,{labelId:"food-select-label-5",id:"food-select-5",value:l[5]||"",label:"Desszert választása",onChange:c(5),MenuProps:{PaperProps:{sx:{backgroundColor:"#0f1827","& .MuiMenuItem-root":{color:"#d5d6d6","&.Mui-selected":{backgroundColor:"#1a2738"},"&.Mui-selected:hover":{backgroundColor:"#1a2738"}}}}},sx:{color:"#d5d6d6",backgroundColor:"#0f1827","&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#bfa181"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"#d5d6d6"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#bfa181"},"& .MuiSelect-icon":{color:"#d5d6d6"}},children:T.map((o,r)=>e.jsx(u,{value:o,children:o},r))})]})]}),e.jsxs(s,{sx:{width:{xs:"100%",sm:"40%"},marginBottom:2,marginRight:{xs:0,sm:2}},children:[e.jsx(d,{variant:"h6",textAlign:"left",fontWeight:350,marginBottom:2,children:"Ital"}),e.jsxs(h,{fullWidth:!0,children:[e.jsx(f,{id:"food-select-label-6",sx:{color:"#d5d6d6","&.Mui-focused":{color:"#bfa181"}},children:"Ital választása"}),e.jsx(m,{labelId:"food-select-label-6",id:"food-select-6",value:l[6]||"",label:"Ital választása",onChange:c(6),MenuProps:{PaperProps:{sx:{backgroundColor:"#0f1827","& .MuiMenuItem-root":{color:"#d5d6d6","&.Mui-selected":{backgroundColor:"#1a2738"},"&.Mui-selected:hover":{backgroundColor:"#1a2738"}}}}},sx:{color:"#d5d6d6",backgroundColor:"#0f1827","&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#bfa181"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"#d5d6d6"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#bfa181"},"& .MuiSelect-icon":{color:"#d5d6d6"}},children:R.map((o,r)=>e.jsx(u,{value:o,children:o},r))})]})]}),e.jsxs(s,{sx:{width:{xs:"100%",sm:"40%"},marginBottom:2,marginRight:{xs:0,sm:2}},children:[e.jsx(d,{variant:"h6",textAlign:"left",fontWeight:350,marginBottom:2,children:"Kávé"}),e.jsxs(h,{fullWidth:!0,children:[e.jsx(f,{id:"food-select-label-7",sx:{color:"#d5d6d6","&.Mui-focused":{color:"#bfa181"}},children:"Kávé választása"}),e.jsx(m,{labelId:"food-select-label-7",id:"food-select-7",value:l[7]||"",label:"Kávé választása",onChange:c(7),MenuProps:{PaperProps:{sx:{backgroundColor:"#0f1827","& .MuiMenuItem-root":{color:"#d5d6d6","&.Mui-selected":{backgroundColor:"#1a2738"},"&.Mui-selected:hover":{backgroundColor:"#1a2738"}}}}},sx:{color:"#d5d6d6",backgroundColor:"#0f1827","&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#bfa181"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"#d5d6d6"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#bfa181"},"& .MuiSelect-icon":{color:"#d5d6d6"}},children:N.map((o,r)=>e.jsx(u,{value:o,children:o},r))})]})]})]}),e.jsx(s,{sx:{marginTop:4,textAlign:"center"},children:e.jsx(ne,{variant:"contained",color:"secondary",endIcon:e.jsx(oe,{}),sx:{m:2,backgroundColor:"#BFA181",width:{xs:"80%",md:"30%",lg:"20%"},color:"#d5d6d6","&.Mui-disabled":{backgroundColor:"#9e9386",color:"#d5d6d6"}},onClick:async()=>{const o={soupName:l[0],appetizerName:l[1],mainCourseName:l[2],hamburgerName:l[3],pizzaName:l[4],dessertName:l[5],drinkName:l[6],coffeeName:l[7]};try{await p.delete("https://localhost:5000/api/DailySpecials",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),await p.post("https://localhost:5000/api/DailySpecials",o,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),C(["","","","","","","",""]),b(!0)}catch(r){if(console.error("Error during DELETE or POST request:",r),r.response)switch(r.response.status){case 500:i("Szerver hiba történt!");break;default:i("Hiba történt a napi ajánlat frissítése közben!")}else i("Nem sikerült kapcsolódni a szerverhez!");b(!1)}},disabled:l.some(o=>o===""),children:"Kész"})})]})}),e.jsx(M,{open:!!x,autoHideDuration:6e3,onClose:()=>{i(null),window.location.href="/"},children:e.jsx(v,{onClose:()=>{i(null),window.location.href="/"},severity:"error",variant:"filled",sx:{width:"100%"},children:x})}),e.jsx(M,{open:U,autoHideDuration:2e3,onClose:()=>{b(!1),window.location.reload()},children:e.jsx(v,{onClose:()=>{b(!1),window.location.reload()},severity:"success",variant:"filled",sx:{width:"100%","& .MuiAlert-message":{color:"#d5d6d6"}},children:"Sikeres frissítés!"})})]})}const de=k(localStorage.getItem("token")).role;_.createRoot(document.getElementById("root")).render(e.jsxs(e.Fragment,{children:[e.jsx(ee,{role:de}),e.jsx(se,{})]}));
