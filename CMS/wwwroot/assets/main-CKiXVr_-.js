import{g as j,a as w,r as n,u as C,j as e,s as f,c as x,b,B as v,m as A,d as R,e as i,T,f as S}from"./index-DW2RJM_L.js";import{p as y,N as z}from"./Navbar-BavKYrQN.js";import{T as N}from"./ThemeProvider-BqDNcuYG.js";import{C as c}from"./Card-B3esABxY.js";import{C as H}from"./CardMedia-Datqsumh.js";import{c as V}from"./AuthService-CMdpMXi0.js";import{r as I}from"./RefreshService-BElCRExB.js";import{S as U,A as E}from"./Snackbar-BoVZBEip.js";function F(t){return w("MuiCardActionArea",t)}const p=j("MuiCardActionArea",["root","focusVisible","focusHighlight"]),W=t=>{const{classes:s}=t;return b({root:["root"],focusHighlight:["focusHighlight"]},F,s)},M=f(v,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(t,s)=>s.root})(A(({theme:t})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${p.focusHighlight}`]:{opacity:(t.vars||t).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${p.focusVisible} .${p.focusHighlight}`]:{opacity:(t.vars||t).palette.action.focusOpacity}}))),_=f("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(t,s)=>s.focusHighlight})(A(({theme:t})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:t.transitions.create("opacity",{duration:t.transitions.duration.short})}))),B=n.forwardRef(function(s,o){const r=C({props:s,name:"MuiCardActionArea"}),{children:h,className:a,focusVisibleClassName:g,...l}=r,u=r,m=W(u);return e.jsxs(M,{className:x(m.root,a),focusVisibleClassName:x(g,m.focusVisible),ref:o,ownerState:u,...l,children:[h,e.jsx(_,{className:m.focusHighlight,ownerState:u})]})}),L=R({palette:{mode:"dark"},typography:{fontFamily:"Roboto, sans-serif"}}),d=(t,s,o)=>e.jsx(B,{onClick:()=>window.location.href=o,children:e.jsxs(i,{sx:{position:"relative"},children:[e.jsx(H,{component:"img",height:"300",image:t,alt:s,sx:{width:"100%",height:"300px",objectFit:"cover"}}),e.jsx(T,{variant:"h2",component:"div",fontFamily:"Roboto, sans-serif",sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",color:"white",backgroundColor:"rgba(0, 0, 0, 0.5)",opacity:0,transition:"opacity 0.3s","&:hover":{opacity:1}},children:s})]})});function $(){const[t,s]=n.useState(null),[o,r]=n.useState(!0);return n.useEffect(()=>{(async()=>{const a=localStorage.getItem("token");if(a){const g=y(a);s(g.role),r(!1)}})()},[]),o?null:e.jsx(e.Fragment,{children:e.jsx(N,{theme:L,children:e.jsxs(i,{display:"flex",flexWrap:"wrap",justifyContent:"center",sx:{mt:4,mb:4,width:"100%"},children:[t==="Admin"||t==="TicketAssistant"?e.jsx(i,{sx:{width:{xs:"100%",sm:"80%",md:"60%",lg:"45%",xl:"35%"},p:1},children:e.jsx(c,{sx:{maxWidth:"100%",height:"auto"},children:d("/img/landing/ticket_temp.png","Jegyértékesítés","tickets")})}):null,t==="Admin"||t==="TicketAssistant"||t==="RestaurantAssistant"?e.jsx(i,{sx:{width:{xs:"100%",sm:"80%",md:"60%",lg:"45%",xl:"35%"},p:1},children:e.jsx(c,{sx:{maxWidth:"100%",height:"auto"},children:d("/img/landing/ticketcheck_temp.png","Jegyellenőrzés","ticketvalidation")})}):null,t==="Admin"?e.jsx(i,{sx:{width:{xs:"100%",sm:"80%",md:"60%",lg:"45%",xl:"35%"},p:1},children:e.jsx(c,{sx:{maxWidth:"100%",height:"auto"},children:d("/img/landing/registration_temp.png","Regisztráció","registration")})}):null,t==="Admin"?e.jsx(i,{sx:{width:{xs:"100%",sm:"80%",md:"60%",lg:"45%",xl:"35%"},p:1},children:e.jsx(c,{sx:{maxWidth:"100%",height:"auto"},children:d("/img/landing/daily_temp.png","Napi ajánlat kezelő","dailyspecials")})}):null,t==="Admin"||t==="RestaurantAssistant"?e.jsx(i,{sx:{width:{xs:"100%",sm:"80%",md:"60%",lg:"45%",xl:"35%"},p:1},children:e.jsx(c,{sx:{maxWidth:"100%",height:"auto"},children:d("/img/landing/restaurant_temp.png","Étterem","restaurant")})}):null,t==="Admin"||t==="TicketAssistant"?e.jsx(i,{sx:{width:{xs:"100%",sm:"80%",md:"60%",lg:"45%",xl:"35%"},p:1},children:e.jsx(c,{sx:{maxWidth:"100%",height:"auto"},children:d("/img/landing/checkout_temp.png","Véglegesítés","customercheckout")})}):null]})})})}const J=()=>{const[t,s]=n.useState(null),[o,r]=n.useState(!0),[h,a]=n.useState(!1);return n.useEffect(()=>{(async()=>{try{const l=localStorage.getItem("token");if(!l){console.log("No token found, redirecting to login."),window.location.href="/login";return}if(!await V()){console.log("No valid"),window.location.href="/login";return}if(!await I()){console.log("No rtoken found, redirecting to login."),window.location.href="/login";return}const k=y(l);s(k.role),localStorage.getItem("isUnauthorizedRedirect")==="true"&&(localStorage.removeItem("isUnauthorizedRedirect"),a(!0))}catch(l){console.error("Authentication error:",l),window.location.href="/login"}finally{r(!1)}})()},[]),o?null:e.jsxs(e.Fragment,{children:[e.jsx(z,{role:t||"Guest"}),e.jsx($,{}),h&&e.jsx(U,{open:h,autoHideDuration:3e3,onClose:()=>a(!1),children:e.jsx(E,{severity:"warning",variant:"filled",sx:{width:"100%"},children:"Az oldal használatához magasabb jogosultság szükséges vagy a kapcsolat megszakadt!"})})]})};S.createRoot(document.getElementById("root")).render(e.jsx(J,{}));
